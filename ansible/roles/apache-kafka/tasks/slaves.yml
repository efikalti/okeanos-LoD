---
  - name: Install Apache kafka.
    include: install.yml

  - name: Configure Apache kafka.
    template: src=slave-server.properties.j2 dest="{{ installation_path }}/kafka/config/server.properties" owner=kafka group=lambda mode=0644
    tags:
      - configure-kafka
      - image-configure

  - name: Start Apache Kafka server.
    supervisorctl: name=apache_kafka state=started
    tags:
      - start-kafka
      - image-configure

  - name: Wait for Apache Kafka server to become available.
    wait_for: port=9092
    tags:
      - start-kafka
      - image-configure
